<template name="adminPanel">
  {{title 'Admin Panel'}}
  <div class="row">
    <div class="col-md-6">
      <h2>Manage Courses</h2>
      <form id="addCourse">
      <table class="table">
        <thead>
        <tr>
          <td>Course Name</td>
        </tr>
        </thead>
        <tbody>
        {{#each courses}}
          <tr>
            <td>
              <a href="#" class="course" id="{{name}}">{{name}}</a>
            </td>
            <td>
              <a href="#" class="btn btn-link remove" id="{{name}}">&times;</a>
            </td>
          </tr>
        {{/each}}
        <tr>
          <td>
            <input type="text" name="courseName" placeholder="Course Name">
            <input type="submit" class="btn btn-default btn-xs">
          </td>
        </tr>
        </tbody>
      </table>
      </form>
    </div>
    <div class="col-md-6">
      <h1>{{course}}</h1>
      {{#if course}}
        <h3>Assignments</h3>
        <table class="table">
          <thead>
          <tr>
            <td>Unassigned</td>
            <td>Assigned</td>
          </tr>
          </thead>
          <tbody>
          <tr>
            <td width="50%">
              <ul>
                {{#each unassigned}}
                  <li>{{name}} <button id="{{_id}}" class="btn btn-xs btn-link assign">+</button></li>
                {{/each}}
              </ul>
            </td>
            <td width="50%">
              <ol>
                {{#each assigned}}
                  <li>{{name}} <button id="{{_id}}" class="btn btn-xs btn-link unassign">&times;</button></li>
                {{/each}}
              </ol>
            </td>
          </tr>
          </tbody>
        </table>
        <h3>Current Students</h3>
        <ul style="list-style-type: none;">
          {{#each students}}
            <li style="list-style-type: none;">
              <a href="#" class="btn btn-link del student" id="{{username}}">&times;</a> {{username}}
            </li>
          {{/each}}
        </ul>
        <form id="addStudents">
          <label>
            Add Students
          </label>
          <input type="text" name="students">
          <input class="btn btn-xs btn-default" type="submit">
        </form>
      {{/if}}
    </div>
  </div>
</template>

<template name="assignments">
  {{title 'Assignments'}}

  {{#if currentUser}}{{else}}
    <h3>Please Log in to See Your Assignments.</h3>
  {{/if}}

  <div class="row">
    <div class="col-md-4 col-md-offset-2">
      <div class="assignments">
      <ol>
      {{#each assignments}}
        <li><a href="/assignments/{{url}}">{{name}}</a></li>
      {{/each}}
      </ol>
      </div>
    </div>
    <div class="col-md-2">
      {{#if isInRole 'admin'}}
        <a class="btn btn-success" href="/assignments/new">New Assignment</a> <br>
        <a class="btn btn-danger" href="/assignments/admin">Manage Courses</a>
      {{/if}}
    </div>
  </div>

</template>

<template name="newAssignment">
  {{title 'New Assignment'}}
  <div class="row">
    <div class="col-md-6">
      <form class="new-assignment">
        <label>
          Name of Assignment
          <input type="text" name="name">
        </label>
        <br>
        <label>
          Levels (separated by comma)
          <input type="text" name="levels">
        </label>
        <br>
        <textarea name="text"></textarea>
        <input type="submit">
      </form>
    </div>
    <div class="col-md-6">
      {{> upload_bootstrap}}
    </div>
  </div>
</template>

<template name="editAssignment">
  {{title 'Edit Assignment'}}
  <div class="row">
    <div class="col-md-6">
      <form class="edit-assignment">
        <label>
          Name:
        </label>
        <input type="text" name="name" value="{{name}}" readonly>
        <br>
        <label>
          Levels:
        </label>
        <input type="text" name="levels" value="{{join levels}}">
        <br>
        <textarea name="text">{{trim content}}</textarea>
        <input type="submit" class="btn btn-primary">
      </form>
    </div>
    <div class="col-md-5">
      <button class="btn btn-danger delete" id="{{_id}}">Delete Assignment</button>
      {{> upload_bootstrap}}
    </div>
  </div>

</template>

<template name="assignment">
  {{title name}}
  {{#if isOld}}
    <div class="row">
      <div class="col-md-12">
        <div class="alert alert-warning">
          You're currently viewing an older version of this entry.
          <button style="" class="btn btn-danger restore">Restore.</button>
        </div>
      </div>
    </div>
  {{/if}}
  <div class="row">
    <div class="col-md-8 col-md-offset-2">
      {{#markdown}}{{getContent history}}{{/markdown}}
    </div>
    <div class="col-md-2">
      {{#if isInRole 'admin'}}
        <a class="btn btn-warning" href="edit/{{url}}">Edit Assignment</a>

        <h3>History</h3>
        <select class="history">
          {{#each history}}
            <option value="{{indx}}">{{dateFormat date}}</option>
          {{/each}}
        </select>
      {{/if}}
      <!--TODO: iterate through all assignment submissions and display-->
      <div class="assignment_submission">
        {{> upload_bootstrap multiple=true callbacks=assignmentSubmit}}
      </div>
    </div>

  </div>
</template>
